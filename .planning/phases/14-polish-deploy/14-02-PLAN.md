---
phase: 14-polish-deploy
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - web/src/pages/LoginPage.tsx
  - web/src/pages/UploadPage.tsx
  - web/src/pages/DashboardPage.tsx
  - web/src/pages/AnalysisDetailsPage.tsx
  - web/src/components/layout/Sidebar.tsx
  - web/src/index.css
autonomous: false

must_haves:
  truths:
    - "All pages have loading states during data fetches"
    - "Error messages are user-friendly and actionable"
    - "App is usable on tablet screens (768px)"
  artifacts:
    - path: "web/src/pages/DashboardPage.tsx"
      provides: "Dashboard with proper loading/error states"
    - path: "web/src/pages/AnalysisDetailsPage.tsx"
      provides: "Details page with proper loading/error states"
  key_links: []
---

<objective>
Audit and polish the frontend for performance, UX consistency, and mobile responsiveness.

Purpose: Ensure production-ready user experience with proper loading states, error handling, and responsive design.
Output: Polished UI ready for production deployment.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
@./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@web/src/pages/LoginPage.tsx
@web/src/pages/UploadPage.tsx
@web/src/pages/DashboardPage.tsx
@web/src/pages/AnalysisDetailsPage.tsx
@web/src/components/layout/Sidebar.tsx
@web/src/components/layout/MainLayout.tsx
@web/src/components/ui/empty-state.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and fix loading states</name>
  <files>web/src/pages/DashboardPage.tsx, web/src/pages/AnalysisDetailsPage.tsx, web/src/pages/AuditTrailPage.tsx</files>
  <action>
    Review each page for proper loading state handling:

    1. DashboardPage:
       - Verify Spinner shows during initial load
       - Verify AnalysisTableSkeleton shows for list loading
       - Check pagination doesn't flash on page change

    2. AnalysisDetailsPage:
       - Verify Spinner shows during analysis fetch
       - Handle loading state for approve/reject mutations (button disabled + loading indicator)
       - Handle loading state for report download

    3. AuditTrailPage:
       - Verify loading skeleton for timeline
       - Handle filter changes without full page reload

    Fix any missing loading states. Use consistent Spinner component.
  </action>
  <verify>Run `npm run build` - no errors. Visually inspect each page for smooth loading transitions.</verify>
  <done>All pages have consistent loading states</done>
</task>

<task type="auto">
  <name>Task 2: Audit and improve error messages</name>
  <files>web/src/pages/LoginPage.tsx, web/src/pages/UploadPage.tsx, web/src/hooks/useApproveAnalysis.ts, web/src/hooks/useRejectAnalysis.ts</files>
  <action>
    Review error handling for user-friendliness:

    1. LoginPage:
       - "Invalid credentials" instead of generic "Login failed"
       - Network error: "Unable to connect. Please check your internet."

    2. UploadPage:
       - File too large: "File exceeds 50MB limit"
       - Invalid type: "Only PDF and image files are supported"
       - Upload failed: "Upload failed. Please try again."

    3. Approve/Reject hooks:
       - Already reviewed: "Analysis has already been reviewed"
       - Not found: "Analysis not found"
       - Network: "Unable to complete action. Please try again."

    4. Empty states:
       - Dashboard empty: "No analyses yet. Upload a document to get started."
       - Audit trail empty: "No audit events found."

    Toast messages should be actionable when possible.
  </action>
  <verify>Run `npm run build` - no errors</verify>
  <done>Error messages are user-friendly and actionable</done>
</task>

<task type="auto">
  <name>Task 3: Mobile responsiveness check and fixes</name>
  <files>web/src/components/layout/Sidebar.tsx, web/src/components/layout/MainLayout.tsx, web/src/index.css</files>
  <action>
    Review and fix responsive behavior at 768px (tablet) and 375px (mobile):

    1. Sidebar:
       - Should collapse to hamburger menu on mobile (< 768px)
       - Add mobile overlay when open
       - Add close button or outside click to close

    2. MainLayout:
       - Content should not overflow horizontally
       - Proper padding on mobile

    3. Tables (AnalysisTable):
       - Horizontal scroll on narrow screens
       - Consider card layout on mobile (optional)

    4. Forms:
       - Touch-friendly button sizes (min 44px)
       - Adequate spacing between interactive elements

    Add any needed Tailwind responsive classes (md:, lg:).
    Test with browser DevTools device emulation.
  </action>
  <verify>Run `npm run build` - no errors. Test at 768px and 375px widths.</verify>
  <done>App is usable on tablet and mobile screens</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Loading states, error messages, and mobile responsiveness fixes</what-built>
  <how-to-verify>
    1. Run: cd web && npm run dev
    2. Visit: http://localhost:3000

    Loading states check:
    - Login and check dashboard loading spinner
    - Click on an analysis - verify details page loading
    - Navigate to audit trail - verify timeline loading

    Error messages check:
    - Try logging in with wrong credentials
    - Check empty state message on dashboard (if no analyses)

    Mobile check:
    - Open DevTools (F12) â†’ Toggle Device Toolbar
    - Set to iPad (768px) - verify sidebar behavior
    - Set to iPhone (375px) - verify layout doesn't overflow
    - Test navigation on mobile view
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] All pages show loading states during fetches
- [ ] Error toasts are user-friendly
- [ ] Layout works at 768px and 375px widths
- [ ] Human verification passed
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Human approved UX polish
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/14-polish-deploy/14-02-SUMMARY.md`
</output>
